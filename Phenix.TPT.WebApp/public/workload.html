<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="lib/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="lib/fonts/font-awesome.min.css">
    <script>
        document.write("<link rel='stylesheet' href='base-style.css?v=" + new Date().toLocaleDateString() + "' charset='UTF-8'>");
    </script>
    <title>月工作量</title>
</head>

<body>
    <div id="menu"></div>

    <div class="content" id="content" v-cloak>
        <div class="container">
            <div class="header-line col-md-12">
                <h4>{{stateTitle[state]}}</h4>
                <div class="arrow-button">
                    <span class="arrow arrow-up" @click="onPlusMonth()" title="下一月"></span>
                    <label class="txt">{{month}}</label>
                    <span class="arrow arrow-down" @click="onMinusMonth()" title="上一月"></span>
                </div>
                <div class="arrow-button">
                    <span class="arrow arrow-up" @click="onPlusYear()" title="下一年"></span>
                    <label class="txt">{{year}}</label>
                    <span class="arrow arrow-down" @click="onMinusYear()" title="上一年"></span>
                </div>
                <div class="filter-button fa fa-filter" @click="onFiler()" :title="filterStateTitle[state]"></div>
            </div>
            <div class="col-md-12" style="clear: both;">
                <table class="table1" style="margin: 0 auto;">
                    <thead id="table-head" style="overflow-x: hidden;" v-show="filteredMyselfCompanyUserPages.count > 0">
                        <tr>
                            <th class="col-md-3" id="table-head-first">
                                <div style="float: right;">
                                    <i class="arrow-page fa fa-step-backward" @click="onFirstPage()" title="1"></i>
                                    <i class="arrow-page fa fa-chevron-left" @click="onPrePage()" :title="(pageNo - 1) + '/' + filteredMyselfCompanyUserPages.count"></i>
                                </div>
                            </th>
                            <th v-for="item in filteredMyselfCompanyUserPages[pageNo]" style="width: 52px; text-align: center; font-size: 13px; font-weight: lighter; color: royalblue;">{{item.RegAlias}}</th>
                            <th>
                                <div style="float: left;">
                                    <i class="arrow-page fa fa-chevron-right" @click="onNextPage()" :title="(pageNo + 1) + '/' + filteredMyselfCompanyUserPages.count"></i>
                                    <i class="arrow-page fa fa-step-forward" @click="onLastPage()" :title="filteredMyselfCompanyUserPages.count"></i>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tfoot id="table-foot" style="overflow-x: hidden;" v-show="filteredMyselfCompanyUserPages.count > 0">
                        <tr>
                            <th class="col-md-3" id="table-foot-first">
                                <div style="float: right; width: 100%; text-align: right; font-size: 13px; font-weight: lighter; color: royalblue;">当月人天合计</div>
                            </th>
                            <th v-for="item in filteredMyselfCompanyUserPages[pageNo]" style="width: 52px; text-align: center; font-size: 13px; font-weight: lighter; color: royalblue;" v-text="getTotalWorkload(item)"></th>
                        </tr>
                    </tfoot>
                    <tbody>
                        <tr v-for="projectInfo in filteredProjectInfos">
                            <td class="col-md-3" style="background: white; color: royalblue; height: 52px;">
                                <div style="float: right; width: 100%;">
                                    <hr class="badge-chapter manage-color" title="可填报项目管理工作量" v-if="projectInfo.ManageWork" />
                                    <hr class="badge-chapter no-color" title="不可填报项目管理工作量" v-else />
                                    <hr class="badge-chapter investigate-color" title="可填报调研分析工作量" v-if="projectInfo.InvestigateWork" />
                                    <hr class="badge-chapter no-color" title="不可填报调研分析工作量" v-else />
                                    <hr class="badge-chapter develop-color" title="可填报设计开发工作量" v-if="projectInfo.DevelopWork" />
                                    <hr class="badge-chapter no-color" title="不可填报设计开发工作量" v-else />
                                    <hr class="badge-chapter test-color" title="可填报联调测试工作量" v-if="projectInfo.TestWork" />
                                    <hr class="badge-chapter no-color" title="不可填报联调测试工作量" v-else />
                                    <hr class="badge-chapter implement-color" title="可填报培训实施工作量" v-if="projectInfo.ImplementWork" />
                                    <hr class="badge-chapter no-color" title="不可填报培训实施工作量" v-else />
                                    <hr class="badge-chapter maintenance-color" title="可填报质保维保工作量" v-if="projectInfo.MaintenanceWork" />
                                    <hr class="badge-chapter no-color" title="不可填报质保维保工作量" v-else />
                                </div>
                                <div style="float: right; width: 100%; height: 48px; word-wrap: break-word; word-break: break-all; overflow: hidden; font-size: 13px; font-weight: lighter; text-align: right;">{{projectInfo.ProjectName}}</div>
                            </td>
                            <td v-for="filteredMyselfCompanyUser in filteredMyselfCompanyUserPages[pageNo]" style="width: 52px; height: 52px; cursor: pointer;" @click="showChangeWorkloadDialog($event, projectInfo, filteredMyselfCompanyUser)">
                                <div style="clear: both; margin-top: -10px;">
                                    <div style="clear: both;">
                                        <hr class="badge-chapter-small develop-color" title="设计开发" v-if="projectInfo[filteredMyselfCompanyUser.Id] != null && projectInfo[filteredMyselfCompanyUser.Id].DevelopWorkload > 0" />
                                        <hr class="badge-chapter-small no-color" title="设计开发" v-else />
                                        <hr class="badge-chapter-small investigate-color" title="调研分析" v-if="projectInfo[filteredMyselfCompanyUser.Id] != null && projectInfo[filteredMyselfCompanyUser.Id].InvestigateWorkload > 0" />
                                        <hr class="badge-chapter-small no-color" title="调研分析" v-else />
                                        <hr class="badge-chapter-small manage-color" title="项目管理" v-if="projectInfo[filteredMyselfCompanyUser.Id] != null && projectInfo[filteredMyselfCompanyUser.Id].ManageWorkload > 0" />
                                        <hr class="badge-chapter-small no-color" title="项目管理" v-else />
                                    </div>
                                    <div style="clear: both;">
                                        <hr class="badge-chapter-small maintenance-color" title="质保维保" v-if="projectInfo[filteredMyselfCompanyUser.Id] != null && projectInfo[filteredMyselfCompanyUser.Id].MaintenanceWorkload > 0" />
                                        <hr class="badge-chapter-small no-color" title="质保维保" v-else />
                                        <hr class="badge-chapter-small implement-color" title="培训实施" v-if="projectInfo[filteredMyselfCompanyUser.Id] != null && projectInfo[filteredMyselfCompanyUser.Id].ImplementWorkload > 0" />
                                        <hr class="badge-chapter-small no-color " title="培训实施" v-else />
                                        <hr class="badge-chapter-small test-color" title="联调测试" v-if="projectInfo[filteredMyselfCompanyUser.Id] != null && projectInfo[filteredMyselfCompanyUser.Id].TestWorkload > 0" />
                                        <hr class="badge-chapter-small no-color" title="联调测试" v-else />
                                    </div>
                                </div>
                                <label style="width: 100%; margin-top: 4px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: bold; text-align: center; color: rgb(31, 73, 125);">
                                    {{projectInfo[filteredMyselfCompanyUser.Id] != null && projectInfo[filteredMyselfCompanyUser.Id].totalWorkload > 0 ? projectInfo[filteredMyselfCompanyUser.Id].totalWorkload : ''}}
                                </label>
                            </td>
                            <td style="background-color: white; color: royalblue; font-weight: lighter; text-align: left;">{{projectInfo.totalWorkload}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="storepopover" class="hide">
            <div id="changework">
                <div v-else>
                    <ul class="list-group" style="padding: 0%;margin:0%;width: 250px">
                        <li v-if="remaindays>0" class="list-group-item">
                            <div style="color:orange">
                                {{nowchoose.Worker}}还剩{{remaindays}}天可填报
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="lidiv">
                                <hr class="vertical-center manage-color" style="float: left;" />
                                <p class="lip" title="人员、产品、过程和项目进行分析和管理等工作" style="margin: 0% 6% 0% 8%;display: inline;">管理</p>
                                <input v-if="canedit && manageedit" class="liinput" :value="nowchoose.ManageWorkloadRole" style="text-align: center; display: inline;" onkeypress='return( /[\d]/.test(String.fromCharCode(event.keyCode)))' @input="changedata($event,'0')" />
                                <input disabled="disabled" v-else title="不允许填写" style="text-align: center;display: inline;background:rgb(246, 246, 246)" :value="nowchoose.ManageWorkloadRole" />
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="lidiv">
                                <hr class="vertical-center investigate-color" style="float: left;" />
                                <p class="lip " title="收集，分析，调研，撰写项目需求等工作 " style="margin: 0% 6% 0% 8%;display: inline; ">需求</p>
                                <input v-if="canedit && investigateedit" class="liinput " :value="nowchoose.InvestigateWorkloadRole " style="text-align: center;display: inline;" onkeypress='return( /[\d]/.test(String.fromCharCode(event.keyCode)))' @input="changedata($event, '1') ">
                                <input disabled="disabled" v-else title="不允许填写" :value="nowchoose.InvestigateWorkloadRole" style="text-align: center;display: inline;background:rgb(246, 246, 246)" />
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="lidiv">
                                <hr class="vertical-center develop-color" style="float: left;" />
                                <p class="lip " title="项目的需求和维保期提出的新增需求等开发工作 " style="margin: 0% 6% 0% 8%;display: inline; ">研发</p>
                                <input v-if="canedit && developedit" class="liinput" :value="nowchoose.DevelopWorkloadRole" style="text-align: center;display: inline;" onkeypress='return( /[\d]/.test(String.fromCharCode(event.keyCode)))' @input="changedata($event, '2')">
                                <input disabled="disabled" v-else title="不允许填写" :value="nowchoose.DevelopWorkloadRole" style="text-align: center;display: inline;background:rgb(246, 246, 246)" />
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="lidiv">
                                <hr class="vertical-center test-color" style="float: left;" />
                                <p class="lip " title="测试项目，检验项目是否满足需求等工作" style="margin: 0% 6% 0% 8%;display: inline;">测试</p>
                                <input v-if="canedit && testedit" class="liinput" :value="nowchoose.TestWorkloadRole" style="text-align: center;display: inline;" onkeypress='return( /[\d]/.test(String.fromCharCode(event.keyCode)))' @input="changedata($event, '3')">
                                <input disabled="disabled" v-else title="不允许填写" :value="nowchoose.TestWorkloadRole" style="text-align: center;display: inline;background:rgb(246, 246, 246)" />
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="lidiv">
                                <hr class="vertical-center implement-color" style="float: left;" />
                                <p class="lip " title="安装实施项目，项目培训，协助项目验收,验收之前的维护等工作 " style="margin: 0% 6% 0% 8%;display: inline;">实施</p>
                                <input v-if="canedit && implementedit" class="liinput" :value="nowchoose.ImplementWorkloadRole" style="text-align: center;display: inline;" onkeypress='return( /[\d]/.test(String.fromCharCode(event.keyCode)))' @input="changedata($event, '4')">
                                <input disabled="disabled" v-else title="不允许填写" :value="nowchoose.ImplementWorkloadRole" style="text-align: center;display: inline;background:rgb(246, 246, 246)" />
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="lidiv">
                                <hr class="vertical-center maintenance-color" style="float: left;" />
                                <p class="lip " title="质保期和维保期处理电话、排除bug，解决客户使用问题等工作。如果开发项目未进入质保期，相关工作量请填写到实施栏中 " style="margin: 0% 6% 0% 8%;display: inline;">维保</p>
                                <input v-if="canedit && maintenanceedit" class="liinput" :value="nowchoose.MaintenanceWorkloadRole" style="text-align: center;display: inline;" onkeypress='return( /[\d]/.test(String.fromCharCode(event.keyCode)))' @input="changedata($event, '5')">
                                <input disabled="disabled" v-else title="不允许填写" :value="nowchoose.MaintenanceWorkloadRole" style="text-align: center;display: inline;background:rgb(246, 246, 246);" />
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="goto-top-button">
            <a title="返回顶部" href="#">
                <i class="fa fa-angle-up fa-2x" type="button"></i>
            </a>
        </div>
    </div>

    <script type="text/javascript" src="lib/crypto-js/core-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/enc-base64-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/cipher-core-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/aes-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/md5-min.js"></script>
    <script type="text/javascript" src="lib/json2.js"></script>
    <script type="text/javascript" src="lib/jquery.min.js"></script>
    <script type="text/javascript" src="lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="lib/jquery.base64.js"></script>
    <script type="text/javascript" src="lib/signalr.min.js"></script>
    <script type="text/javascript" src="lib/phenix7.js"></script>

    <script type="text/javascript" src="lib/vue.min.js"></script>
    <script type="text/javascript" src="lib/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="lib/lodash.js"></script>

    <script type="text/javascript" src="base-func.js?v=1"></script>
    <script>
        document.write("<script type='text/javascript' src='workload.js?v=" + new Date().toLocaleDateString() + "'><\/script>");
    </script>

    <div id="wait-hold" style="display: none"></div>
</body>

</html>