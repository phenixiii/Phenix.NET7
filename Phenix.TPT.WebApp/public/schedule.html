<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="lib/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="lib/fonts/font-awesome.min.css">
    <script>
        document.write("<link rel='stylesheet' href='base-style.css?v=" + new Date().toLocaleDateString() + "' charset='UTF-8'>");
    </script>
    <title>工作档期</title>
</head>

<body>
    <style>
        input[type="checkbox"] {
            display: none;
        }

        input[type="checkbox"] + label {
            cursor: pointer;
            font-size: 1em;
        }

        [id^="checkbox-7-"] + label {
            background-color: #FFF;
            padding: 6px 43px 8px 9px;
            border-radius: 5px;
            display: inline-block;
            position: relative;
            margin-right: 30px;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            font-size: 1.3em !important;
            color: #464E50;
            -webkit-transition: all 0.3s linear, color 0 linear;
            transition: all 0.3s linear, color 0 linear;
        }

        [id^="checkbox-7-"] + label:after {
            position: absolute;
            top: 4px;
            right: 3px;
            width: 24px;
            display: block;
            font-size: 1em !important;
            height: 16px;
            padding: 4px 0px;
            text-align: center;
            color: #496F7A;
        }

        [id^="checkbox-7-"]:checked + label {
            color: #fff;
        }

        [id^="checkbox-7-"] + label > span {
            position: relative;
            z-index: 99999;
            font-family: 'adelle-sans', sans-serif;
        }

        [id^="checkbox-7-"]:checked + label:after {
            content: '\2715';
        }

        [id^="checkbox-7-"] + label:before {
            content: ' ';
            position: absolute;
            background: #6AC6DD;
            width: 0%;
            height: 100%;
            top: 0;
            -webkit-transition: all 0.3s ease-in;
            transition: all 0.3s ease-in;
            left: 0;
        }

        [id^="checkbox-7-"]:checked + label:before {
            content: ' ';
            position: absolute;
            width: 100%;
            height: 100%;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
            top: 0;
            left: 0;
        }
    </style>

    <div id="menu"></div>

    <div class="content" id="content" v-cloak>
        <div class="container">
            <div class="header-line col-md-12">
                <h4>{{stateTitle[state]}}</h4>
                <div class="filter-button fa fa-filter" @click="onFiler()" :title="filterStateTitle[state]"></div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <table id="example1" class="table table-bordered">
                        <thead>
                            <tr>
                                <th v-for="item in timeline">{{item.year+'.'+item.month}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(item,index) in workSchedule">
                                <td>{{item[0].Customer}}</td>
                                <td v-for="(items,indexs) in item" data-toggle="modal" @click="select(index,indexs,$event)" @dblclick="copy(index,indexs)" :title="items.Managers==null?'该客户没有项目':''">
                                    <em style="color: #2e6da4; margin: 0%; font-style: normal" v-if='indexs<3' v-html="fullworkeritem(items.Year,items.Month,items.Customer).join(' ')"></em>
                                    <em style="color: black; margin: 0%; font-style: normal" v-if='indexs>2'>{{items.Worker}}</em>
                                    <em style="color: gray; margin: 0%; font-style: normal" v-else v-html='surplus(items.Worker,fullworkeritem(items.Year,items.Month,items.Customer))'></em>
                                </td>
                                <!--td v-for="(items,indexs) in item" data-toggle="modal" @click="select(index,indexs,$event)" @dblclick="copy(index,indexs)" :style="indexs>1?'color:black':'color:gray'" :title="items.Managers==null?'该客户没有项目':''">{{items.Worker}}</td-->
                            </tr>
                            <tr style="background-color: rgb(230, 230, 255)">
                                <td>未分配</td>
                                <td v-for="(item,index) in unchoose" v-html="item.join(' ')">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" aria-hidden="true" @click="closemodal()">&times;</button>
                        <h4 class="modal-title" id="myModalLabel" v-html="workSchedule[openindex][openindexs].Customer+workSchedule[openindex][openindexs].Year+'年'+workSchedule[openindex][openindexs].Month+'月人员安排'"></h4>
                    </div>
                    <div class="modal-body">
                        <template v-for="(item,index) in allworker">
                            <input type="checkbox" :id="'checkbox-7-'+index" v-model="chooseworker[index]" :disabled="canchange">
                            <label class="checklabel" :for="'checkbox-7-'+index" style="width:19%"><span>{{item}}</span></label>
                        </template>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" @click="closemodal()">关闭</button>
                        <button type="button" class="btn btn-primary" @click="saveschedule()">保存</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="goto-top-button">
            <a title="返回顶部" href="#">
                <i class="fa fa-angle-up fa-2x" type="button"></i>
            </a>
        </div>
    </div>

    <script type="text/javascript" src="lib/crypto-js/core-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/enc-base64-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/cipher-core-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/aes-min.js"></script>
    <script type="text/javascript" src="lib/crypto-js/md5-min.js"></script>
    <script type="text/javascript" src="lib/json2.js"></script>
    <script type="text/javascript" src="lib/jquery.min.js"></script>
    <script type="text/javascript" src="lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="lib/jquery.base64.js"></script>
    <script type="text/javascript" src="lib/signalr.min.js"></script>
    <script type="text/javascript" src="lib/phenix7.js"></script>

    <script type="text/javascript" src="lib/vue.min.js"></script>
    <script type="text/javascript" src="lib/bootstrap/bootstrap.min.js"></script>

    <script type="text/javascript" src="base-func.js?v=1"></script>
    <script>
        document.write("<script type='text/javascript' src='schedule.js?v=" + new Date().toLocaleDateString() + "'><\/script>");
    </script>

    <div id="wait-hold" style="display: none"></div>
</body>

</html>